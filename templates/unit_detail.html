
{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-md-12">
    <!-- Course Header -->
    <div class="card mb-4">
      <div class="card-body">
        <h1 class="card-title h3 mb-2">{{ unit.title }}</h1>
        <p class="text-muted mb-3">Category: {{ unit.category or 'Counseling' }}</p>
        
        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs" id="courseTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button" role="tab">Course Info</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">Reviews</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="announcements-tab" data-bs-toggle="tab" data-bs-target="#announcements" type="button" role="tab">Announcements</button>
          </li>
        </ul>
      </div>
    </div>

    <div class="row">
      <!-- Main Content -->
      <div class="col-md-8">
        <!-- Course Progress -->
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title">Course Progress</h5>
            <div class="progress mb-3" style="height: 10px;">
              <div class="progress-bar" role="progressbar" style="width: 33%;" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <p class="mb-1"><strong>1/3</strong> - 33% Complete</p>
            
            <div class="mt-3">
              <a href="{{ url_for('learning_interface', unit_id=unit.id) }}" class="btn btn-primary">
                Continue Learning</a>
              <button class="btn btn-outline-secondary">Complete Course</button>
            </div>
            
            <div class="mt-3">
              <p class="text-muted mb-0">You enrolled in this course on <strong>April 14, 2025</strong></p>
            </div>
          </div>
        </div>

        <!-- Course Content -->
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Course Content</h5>
            
            <!-- Resources Section -->
            <div class="mb-4">
              <h6>Learning Resources</h6>
              {% if resources %}
                <div class="list-group">
                  {% for r in resources %}
                    <a href="{{ url_for('uploaded_file', filename=r.filename) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                      <div>
                        <strong>{{ r.title }}</strong>
                        <br>
                        <small class="text-muted">Uploaded: {{ r.uploaded_at }}</small>
                      </div>
                      <span class="badge bg-primary rounded-pill">Download</span>
                    </a>
                  {% endfor %}
                </div>
              {% else %}
                <div class="alert alert-info">
                  <p class="mb-0">No learning resources available yet.</p>
                </div>
              {% endif %}
            </div>

            <!-- Course Description -->
            <div class="mb-4">
              <h6>About This Course</h6>
              <p class="text-muted">{{ unit.description or 'This course provides comprehensive training in Christian counseling and psychology with a focus on clinical applications.' }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="col-md-4">
        <!-- Lecturer Info -->
        <div class="card mb-4">
          <div class="card-body">
            <h6 class="card-title">A course by</h6>
            <div class="d-flex align-items-center">
              <div class="flex-shrink-0">
                <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                  <span class="text-white fw-bold">{{ (unit.lecturer_name or 'TBA')[:1] }}</span>
                </div>
              </div>
              <div class="flex-grow-1 ms-3">
                <h6 class="mb-0">{{ unit.lecturer_name or 'Lecturer TBA' }}</h6>
                <small class="text-muted">Course Instructor</small>
              </div>
            </div>
          </div>
        </div>

        <!-- Course Stats -->
        <div class="card">
          <div class="card-body">
            <h6 class="card-title">Course Details</h6>
            <div class="mb-2">
              <small class="text-muted">Course Code</small>
              <p class="mb-0 fw-bold">{{ unit.code }}</p>
            </div>
            <div class="mb-2">
              <small class="text-muted">Duration</small>
              <p class="mb-0">12 Weeks</p>
            </div>
            <div class="mb-2">
              <small class="text-muted">Enrollment</small>
              <p class="mb-0">Self-paced</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Tab Content -->
<div class="tab-content mt-3" id="courseTabsContent">
  <!-- Course Info Tab -->
  <div class="tab-pane fade show active" id="info" role="tabpanel">
    <!-- Content already displayed above -->
  </div>
  
  <!-- Reviews Tab -->
  <div class="tab-pane fade" id="reviews" role="tabpanel">
    <div class="card">
      <div class="card-body">
        <h5>Course Reviews</h5>
        <p class="text-muted">No reviews yet. Be the first to review this course!</p>
      </div>
    </div>
  </div>
  
  <!-- Announcements Tab -->
  <div class="tab-pane fade" id="announcements" role="tabpanel">
    <div class="card">
      <div class="card-body">
        <h5>Announcements</h5>
        <p class="text-muted">No announcements at this time.</p>
      </div>
    </div>
  </div>
</div>

<style>
.card {
  border: none;
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
  margin-bottom: 1.5rem;
}

.card-title {
  color: #2c3e50;
  font-weight: 600;
}

.nav-tabs .nav-link {
  color: #6c757d;
  font-weight: 500;
  border: none;
  padding: 0.75rem 1.5rem;
}

.nav-tabs .nav-link.active {
  color: #4e73df;
  border-bottom: 3px solid #4e73df;
  background: transparent;
}

.progress {
  background-color: #e9ecef;
  border-radius: 5px;
}

.progress-bar {
  background-color: #4e73df;
  border-radius: 5px;
}

.btn-primary {
  background-color: #4e73df;
  border-color: #4e73df;
}

.btn-primary:hover {
  background-color: #2e59d9;
  border-color: #2e59d9;
}

.list-group-item {
  border: 1px solid #e3e6f0;
  margin-bottom: 0.5rem;
  border-radius: 0.35rem;
}

.list-group-item:hover {
  background-color: #f8f9fa;
  border-color: #4e73df;
}

.badge {
  font-size: 0.75em;
}
</style>

<script>
// Bootstrap tab functionality (if not already included in your base.html)
document.addEventListener('DOMContentLoaded', function() {
  var triggerTabList = [].slice.call(document.querySelectorAll('#courseTabs button'))
  triggerTabList.forEach(function (triggerEl) {
    var tabTrigger = new bootstrap.Tab(triggerEl)
    triggerEl.addEventListener('click', function (event) {
      event.preventDefault()
      tabTrigger.show()
    })
  })
})
</script>
{% endblock %}
```

## Key Changes Made

1. **Course Header Section**
   - Large course title display
   - Category information
   - Navigation tabs (Course Info, Reviews, Announcements)

2. **Course Progress Section**
   - Visual progress bar
   - Completion statistics (1/3 - 33% Complete)
   - Action buttons (Continue Learning, Complete Course)
   - Enrollment date display

3. **Enhanced Resources Display**
   - Better organized list with download badges
   - Improved visual hierarchy
   - Informative empty state

4. **Sidebar Components**
   - Lecturer information with avatar
   - Course details (code, duration, enrollment type)
   - Clean, organized layout

5. **Tab Content Areas**
   - Course Info (main content)
   - Reviews section
   - Announcements section

6. **Visual Improvements**
   - Modern card-based design
   - Consistent spacing and typography
   - Professional color scheme matching your reference
   - Responsive layout for all screen sizes

The page now provides a comprehensive student view that matches the structure and functionality shown in your reference image, while maintaining all your existing backend data integration.
